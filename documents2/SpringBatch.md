# SpringBatch



### 使用场景

典型的批处理程序通常是从数据库、文件或队列中读取大量数据，然后通过某些方法处理数据，最后将处理好格式的数据写 回库中。通常SpringBatch工作在离线模式下,不需要用户干预、就能自动进行基本的批处理迭代，进行类似事务方式的处 理。批处理是大多数IT项目的一个组成部分，而Spring Batch是唯一能够提供健壮的企业级扩展性的批处理开源框架。

### 业务场景

- 定期提交批处理任务
- 并发批处理:并行执行任务
- 分阶段，企业消息驱动处理
- 高并发批处理任务
- 失败后手动或定时重启 
- 按顺序处理任务依赖(使用工作流驱动的批处理插件) 
- 局部处理:跳过记录(例如在回滚时) 
- 完整的批处理事务:因为可能有小数据量的批处理或存在存储过程/脚本



### 基本架构分为三类

应用层：包括开发人员使用该组件编写的所有批处理作业和自定义代码

核心层：包含加载和控制批处理作业必须的核心类。包括JobLauncher，Job和Step的实现

基础架构层：应用层和核心层都构建在基础架构层之上。基础架构包括通用的readers(ItemReader)和writers(ItemWriter)，以及services（如重试模块RetryTemplate），可以被核心层和应用层所用。



#### 处理时的分区方法

1、使用固定值来分解记录集

2、根据关键列分解

3、根据分区表决定分配给哪一个批处理实例

4、根据值的一部分决定分配给哪个批处理实例的值

5、根据视图来分解

6、附加的处理指示器

7、将表提取到平面文件

8、使用哈希列